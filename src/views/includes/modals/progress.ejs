<!-- Modal -->
<div id="progress-id<%= data.book.book_id %>" class="modalDiv">
  <!-- Modal content -->
  <div class="modalContent rounded w-50 px-3 py-4">
    <div class="container">
      <!-- Top Div: Book Info -->
      <div class="card p-3 mb-4 shadow">
        <h4 class="card-title mb-0">Book Title</h4>
        <p class="card-text mb-0">Author - 2025 | 350 pages</p>
        <form id="bookReviewForm" class="border-top pt-3">
          <div class="mb-3">
            <label for="reviewText" class="form-label"><strong>What do you think so far?</strong></label>
            <textarea class="form-control" id="reviewText" rows="5" required></textarea>
          </div>
          <div class="d-flex justify-content-between">
            <div class="d-flex align-items-center gap-2">
              <input type="number" class="form-control d-inline w-25" id="pagesRead" required />
              <label for="pagesRead" class="form-label d-inline"><strong>pages read.</strong></label>
            </div>
            <button type="submit" class="btn btn-primary d-inline justify-self">
              Submit
            </button>
          </div>
        </form>
      </div>

      <!-- Bottom Div: Progress Log -->
      <div class="card p-3 shadow">
        <h4 class="card-title mb-4">Progress</h4>
        <!-- Vertical Progress Bar 1 -->
        <div class="d-inline-flex gap-2">
          <small>January 1, 2025</small>
          <div class="progress w-25">
            <div class="progress-bar" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0"
              aria-valuemax="100">
              25%
            </div>
          </div>
          <small>350 pages</small>
        </div>
        <p class="mt-3">"Great so far!"</p>

        <!-- Vertical Progress Bar 2 -->
        <div class="d-inline-flex gap-2">
          <small>January 1, 2025</small>
          <div class="progress w-25">
            <div class="progress-bar" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0"
              aria-valuemax="100">
              25%
            </div>
          </div>
          <small>350 pages</small>
        </div>
        <p class="mt-3">"A bit slow in the middle."</p>

        <!-- Vertical Progress Bar 3 -->
        <div class="d-inline-flex gap-2">
          <small>January 1, 2025</small>
          <div class="progress w-25">
            <div class="progress-bar" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0"
              aria-valuemax="100">
              25%
            </div>
          </div>
          <small>350 pages</small>
        </div>
        <p class="mt-3">"Just started."</p>

        <!-- Add additional logs here -->
      </div>
    </div>
  </div>
</div>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const modalBtns = document.querySelectorAll('.modalBtn');
    const modalDivs = document.querySelectorAll('.modalDiv');

    modalBtns.forEach(btn => {
        btn.addEventListener('click', function (e) {
            e.preventDefault(); // Prevent the default anchor behavior
            const bookId = this.getAttribute('data-book-id'); // Get the book-specific ID
            const modalDiv = document.getElementById(`progress-${bookId}`);
            if (modalDiv) {
                modalDiv.style.display = 'block'; // Display the target modal
            }
        });
    });

    modalDivs.forEach(modalDiv => {
        modalDiv.addEventListener('click', function (e) {
            if (e.target === modalDiv) {
                modalDiv.style.display = 'none'; // Hide the modal if the background is clicked
            }
        });
        const form = modalDiv.querySelector('form');
        if (form) {
            form.addEventListener('submit', function (e) {
                e.preventDefault(); // Prevent the default form submission
                modalDiv.style.display = 'none'; // Hide the modal
                // Optionally, add form submission logic here (e.g., using AJAX)
            });
        }
    });
  });
</script>